FROM node:20-bookworm-slim

WORKDIR /app

# Copiamos solo manifests primero para cachear dependencias
COPY ./Backend/package.json ./Backend/package-lock.json* ./

# Si NO tienes package-lock.json, cambia esto por: RUN npm install --omit=dev
RUN npm ci --omit=dev || npm install --omit=dev

# Copiamos el resto del backend
COPY ./Backend .

ENV NODE_ENV=production
EXPOSE 5000

CMD ["node", "app.js"]
